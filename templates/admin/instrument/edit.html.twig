{% extends 'app-layout/layout.html.twig' %}

{% block title %}Modifier {{ instrument.name }} - Administration{% endblock %}


{% block main_content %}
<div class="p-6">
    <!-- Header -->
    <div class="mb-8">
        <div class="flex items-center gap-4 mb-4">
            <a href="{{ path('app_instrument_show', {id: instrument.id}) }}" 
               class="text-gray-600 hover:text-gray-900 transition-colors">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
            </a>
            <h1 class="text-3xl font-bold text-gray-900">Modifier l'instrument</h1>
        </div>
        <p class="text-gray-600">{{ instrument.brand }} {{ instrument.model }} - N° série: {{ instrument.serialNumber }}</p>
    </div>

    <!-- Formulaire -->
    <div class="max-w-2xl">
        <div class="bg-white rounded-xl shadow-sm border border-gray-200 p-8">
            {{ form_start(form, {'attr': {'class': 'space-y-6'}}) }}
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    {{ form_label(form.type, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-2'}}) }}
                    {{ form_widget(form.type, {'attr': {'class': 'w-full'}}) }}
                    {{ form_errors(form.type) }}
                </div>

                <div class="col-span-1 md:col-span-2">
                    {{ form_label(form.description, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-2'}}) }}
                    {{ form_widget(form.description, {'attr': {'class': 'w-full'}}) }}
                    {{ form_errors(form.description) }}
                </div>

                <div>
                    {{ form_label(form.brand, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-2'}}) }}
                    {{ form_widget(form.brand, {'attr': {'class': 'w-full'}}) }}
                    {{ form_errors(form.brand) }}
                </div>

                <div>
                    {{ form_label(form.model, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-2'}}) }}
                    {{ form_widget(form.model, {'attr': {'class': 'w-full'}}) }}
                    {{ form_errors(form.model) }}
                </div>

                <div>
                    {{ form_label(form.serialNumber, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-2'}}) }}
                    {{ form_widget(form.serialNumber, {'attr': {'class': 'w-full'}}) }}
                    {{ form_errors(form.serialNumber) }}
                </div>

                <div>
                    {{ form_label(form.condition, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-2'}}) }}
                    {{ form_widget(form.condition, {'attr': {'class': 'w-full'}}) }}
                    {{ form_errors(form.condition) }}
                </div>

                <div class="col-span-1 md:col-span-2">
                    <div class="flex items-center">
                        {{ form_widget(form.isRentable, {'attr': {'class': 'mr-3'}}) }}
                        {{ form_label(form.isRentable, null, {'label_attr': {'class': 'text-sm font-medium text-gray-700'}}) }}
                    </div>
                    {{ form_errors(form.isRentable) }}
                    {% if instrument.isCurrentlyRented %}
                        <p class="text-sm text-amber-600 mt-2">
                            ⚠️ Cet instrument est actuellement en location. Décocher cette option n'affectera pas la location en cours.
                        </p>
                    {% endif %}
                </div>

                <div class="col-span-1 md:col-span-2">
                    {{ form_label(form.additionalInfo, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-2'}}) }}
                    {{ form_widget(form.additionalInfo, {'attr': {'class': 'w-full'}}) }}
                    {{ form_errors(form.additionalInfo) }}
                </div>
            </div>

            <!-- Actions -->
            <div class="flex justify-end gap-4 pt-6 border-t border-gray-200">
                <a href="{{ path('app_instrument_show', {id: instrument.id}) }}" 
                   class="px-6 py-3 border border-gray-300 rounded-lg text-gray-700 font-semibold hover:bg-gray-50 transition-colors">
                    Annuler
                </a>
                <button type="submit" 
                        class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors">
                    Enregistrer les modifications
                </button>
            </div>

            {{ form_end(form) }}
        </div>
    </div>
</div>
{% endblock %}